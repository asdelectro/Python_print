<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–Ω—Ç–µ—Ä —ç—Ç–∏–∫–µ—Ç–æ–∫ - RCDevices</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="main-container">
        <div class="panel">
            <div class="header">
                <div class="brand-line">
                    <img src="https://www.radiacode.com/favicon.ico" alt="Radiacode" class="brand-icon">
                    <span class="brand-name">Radiacode</span>
                    <span class="divider">|</span>
                    <span class="app-title">–ü—Ä–∏–Ω—Ç–µ—Ä —ç—Ç–∏–∫–µ—Ç–æ–∫ RCDevices</span>
                </div>
                <div class="config-toggles">
                    <div class="toggle-item">
                        –ü—Ä–æ–≤–µ—Ä–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: <span id="validationStatus" style="font-weight: bold;"></span>
                        <button type="button" class="toggle-btn" onclick="toggleValidation()">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
                    </div>
                    <div class="toggle-item">
                        –§–∏–∑–∏—á–µ—Å–∫–∞—è –ø–µ—á–∞—Ç—å: <span id="printStatus" style="font-weight: bold;"></span>
                        <button type="button" class="toggle-btn" onclick="togglePrint()">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
                    </div>
                </div>
            </div>

            <!-- Model Selection -->
            <div class="step-item" style="margin-bottom: 20px;">
                <div class="step-icon">üîß</div>
                <div class="step-content">
                    <div class="step-title">–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                    <div class="step-description">–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã</div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 12px;">
                        <button class="btn" style="flex: 1; min-width: 120px; padding: 12px;" onclick="selectModel('RC-102')" id="modelRC102">
                            RC-102
                        </button>
                        <button class="btn" style="flex: 1; min-width: 120px; padding: 12px;" onclick="selectModel('RC-103')" id="modelRC103">
                            RC-103
                        </button>
                        <button class="btn" style="flex: 1; min-width: 120px; padding: 12px;" onclick="selectModel('RC-103G')" id="modelRC103g">
                            RC-103G
                        </button>
                        <button class="btn" style="flex: 1; min-width: 120px; padding: 12px;" onclick="selectModel('RC-110')" id="modelRC110">
                            RC-110
                        </button>
                    </div>
                    <div class="step-note" style="margin-top: 12px;">
                        ‚ö†Ô∏è –ü—Ä–∏ —Å–º–µ–Ω–µ –º–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç–∞ –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
                    </div>
                </div>
            </div>

            <!-- Progress Section -->
            <div class="progress-section">
                <div class="progress-header">
                    <div class="progress-title">–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                    <div class="progress-subtitle" id="deviceSerial">–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</div>
                </div>
                
                <div class="main-progress">
                    <div class="progress-fill" id="mainProgress"></div>
                </div>
                
                <div class="progress-text" id="progressText">
                    –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
                </div>

                <!-- Auto Mode Controls -->
                <div class="auto-controls">
                    <button class="auto-btn" id="autoModeBtn" onclick="toggleAutoMode()">
                        –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
                    </button>
                    <button class="auto-btn stop" id="stopAutoBtn" onclick="stopAutoMode()" style="display: none;">
                        –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
                    </button>
                </div>
            </div>

            <!-- Steps Container -->
            <div class="steps-container">
                <!-- Step 1: Connect Device -->
                <div class="step-item pending" id="step1">
                    <div class="step-icon">1</div>
                    <div class="step-content">
                        <div class="step-title">1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                        <div class="step-description">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</div>
                        <button class="btn" onclick="connectDevice()" id="connectBtn">
                            –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
                        </button>
                    </div>
                </div>

                <!-- Step 2: Validate Device -->
                <div class="step-item pending" id="step2">
                    <div class="step-icon">2</div>
                    <div class="step-content">
                        <div class="step-title">2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</div>
                        <div class="step-description">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                        <div class="device-status-box" id="deviceStatusBox" style="display: none;">
                            <div class="device-status-item">
                                <span><strong>Serial:</strong> <span id="serialValue">-</span></span>
                                <span id="serialIcon">‚è≥</span>
                            </div>
                            <div class="device-status-item">
                                <span><strong>Tests OK:</strong> <span id="testsValue">-</span></span>
                                <span id="testsIcon">‚è≥</span>
                            </div>
                            <div class="device-status-item">
                                <span><strong>Calibration OK:</strong> <span id="calibValue">-</span></span>
                                <span id="calibIcon">‚è≥</span>
                            </div>
                            <div class="device-status-item">
                                <span><strong>Status:</strong> <span id="statusValue">-</span></span>
                                <span id="statusIcon">‚è≥</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Print Label -->
                <div class="step-item pending" id="step3">
                    <div class="step-icon">3</div>
                    <div class="step-content">
                        <div class="step-title">3. –ü–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫–∏</div>
                        <div class="step-description">–°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–µ—á–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫–∏</div>
                        <button class="btn" onclick="printLabel()" disabled id="printBtn">
                            –°–æ–∑–¥–∞—Ç—å –∏ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å —ç—Ç–∏–∫–µ—Ç–∫—É
                        </button>
                    </div>
                </div>

                <!-- Step 4: Scan Label -->
                <div class="step-item pending" id="step4">
                    <div class="step-icon">4</div>
                    <div class="step-content">
                        <div class="step-title">4. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∏–∫–µ—Ç–∫–∏</div>
                        <div class="step-description">–û–∂–∏–¥–∞–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–π —ç—Ç–∏–∫–µ—Ç–∫–∏</div>
                        <div class="scan-section-content" id="scanContent" style="display: none;">
                            <div class="scan-barcode" id="scanBarcode">–û–∂–∏–¥–∞–Ω–∏–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...</div>
                            <button class="btn btn-secondary" onclick="checkScanStatus()">
                                –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                            </button>
                        </div>
                        <div class="step-note">
                            –ù–∞–∫–ª–µ–π—Ç–µ —ç—Ç–∏–∫–µ—Ç–∫—É –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –µ—ë –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics -->
            <div class="step-item" id="statsBlock" style="display: none; margin-bottom: 20px;">
                <div class="step-icon">üìä</div>
                <div class="step-content">
                    <div class="step-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è</div>
                    <div class="step-description">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</div>
                    <div id="scanStats"></div>
                </div>
            </div>

            <!-- Scanned Items Preview -->
            <div id="scannedItems" class="scanned-items" style="display: none;">
                <div style="color: #ffffff; font-size: 16px; font-weight: 400; margin-bottom: 12px; text-align: center;">
                    –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç—Ç–∏–∫–µ—Ç–∫–∏
                </div>
                <div id="itemsList"></div>
            </div>

            <div class="status" id="status"></div>

            <!-- Brand Footer -->
            <div class="brand-footer">
                <div class="footer-content">
                    <img src="https://www.radiacode.com/favicon.ico" alt="Radiacode" class="footer-icon">
                    <span>Powered by Radiacode</span>
                    <a href="https://www.radiacode.com" target="_blank" class="brand-link">radiacode.com</a>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>